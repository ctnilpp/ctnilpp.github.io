<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>QFramework架构学习 | Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="耦合和内聚为什么不用unity最原生的拖拽？因为这种拖拽，会产生随机的引用，造成各种耦合，一旦项目复杂，关系会很乱 特别是在unity是使用树管理的情境下，使用拖拽，导致双向引用，循环引用，也就是耦合 耦合、内聚耦合，也就是双向引用，循环引用， 耦合的产生有三种原因： 1.方法的调用 2.委托和回调 3.消息或事件 内聚，也就是同样的代码放在一起 也就是模块化 1.单例 2.IOC 依赖注入 3.">
<meta property="og:type" content="article">
<meta property="og:title" content="QFramework架构学习">
<meta property="og:url" content="http://example.com/2024/03/22/QFramework%E6%9E%B6%E6%9E%84%E5%AD%A6%E4%B9%A0/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="耦合和内聚为什么不用unity最原生的拖拽？因为这种拖拽，会产生随机的引用，造成各种耦合，一旦项目复杂，关系会很乱 特别是在unity是使用树管理的情境下，使用拖拽，导致双向引用，循环引用，也就是耦合 耦合、内聚耦合，也就是双向引用，循环引用， 耦合的产生有三种原因： 1.方法的调用 2.委托和回调 3.消息或事件 内聚，也就是同样的代码放在一起 也就是模块化 1.单例 2.IOC 依赖注入 3.">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="c:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20240322214435454.png">
<meta property="og:image" content="c:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20240322214702946.png">
<meta property="og:image" content="c:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20240322214754710.png">
<meta property="og:image" content="c:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20240322215342700.png">
<meta property="og:image" content="c:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20240322215532608.png">
<meta property="og:image" content="c:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20240322221350511.png">
<meta property="og:image" content="c:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20240322221532209.png">
<meta property="og:image" content="c:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20240322221733717.png">
<meta property="og:image" content="c:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20240322222033350.png">
<meta property="og:image" content="c:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20240322222139061.png">
<meta property="og:image" content="c:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20240322222150155.png">
<meta property="og:image" content="c:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20240322222247216.png">
<meta property="og:image" content="c:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20240322222603771.png">
<meta property="og:image" content="c:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20240322222710989.png">
<meta property="og:image" content="c:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20240322222828361.png">
<meta property="og:image" content="c:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20240322223017818.png">
<meta property="og:image" content="c:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20240322223515559.png">
<meta property="og:image" content="c:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20240322223707160.png">
<meta property="og:image" content="c:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20240322223803892.png">
<meta property="og:image" content="c:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20240322224746975.png">
<meta property="og:image" content="c:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20240322224933946.png">
<meta property="og:image" content="c:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20240322225218707.png">
<meta property="og:image" content="c:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20240322225320387.png">
<meta property="og:image" content="c:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20240322225417250.png">
<meta property="og:image" content="c:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20240322225617644.png">
<meta property="article:published_time" content="2024-03-22T13:38:01.000Z">
<meta property="article:modified_time" content="2024-03-22T15:38:44.259Z">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="c:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20240322214435454.png">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
  
<meta name="generator" content="Hexo 7.0.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"><span class="fa fa-bars"></span></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
        
          <a class="nav-icon" href="/atom.xml" title="RSS Feed"><span class="fa fa-rss"></span></a>
        
        <a class="nav-icon nav-search-btn" title="Search"><span class="fa fa-search"></span></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://example.com"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main"><article id="post-QFramework架构学习" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2024/03/22/QFramework%E6%9E%B6%E6%9E%84%E5%AD%A6%E4%B9%A0/" class="article-date">
  <time class="dt-published" datetime="2024-03-22T13:38:01.000Z" itemprop="datePublished">2024-03-22</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="p-name article-title" itemprop="headline name">
      QFramework架构学习
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="耦合和内聚"><a href="#耦合和内聚" class="headerlink" title="耦合和内聚"></a>耦合和内聚</h2><h4 id="为什么不用unity最原生的拖拽？"><a href="#为什么不用unity最原生的拖拽？" class="headerlink" title="为什么不用unity最原生的拖拽？"></a>为什么不用unity最原生的拖拽？</h4><p>因为这种拖拽，会产生随机的引用，造成各种耦合，一旦项目复杂，关系会很乱</p>
<p>特别是在unity是使用树管理的情境下，使用拖拽，导致双向引用，循环引用，也就是耦合</p>
<h4 id="耦合、内聚"><a href="#耦合、内聚" class="headerlink" title="耦合、内聚"></a>耦合、内聚</h4><p>耦合，也就是双向引用，循环引用，</p>
<p>耦合的产生有三种原因：</p>
<p>1.方法的调用</p>
<p>2.委托和回调</p>
<p>3.消息或事件</p>
<p>内聚，也就是同样的代码放在一起</p>
<p>也就是模块化</p>
<p>1.单例</p>
<p>2.IOC 依赖注入</p>
<p>3.分层 MVC 三层架构</p>
<h4 id="例子一"><a href="#例子一" class="headerlink" title="例子一"></a>例子一</h4><p>比如，父节点 是 LoginUI界面 子节点是 其上的一个Button按钮</p>
<p>一开始，父节点知道Button是其子节点(Transform)，Button持有LoginUI的引用，通过这个引用调用其SetActive方法，此时，就产生了双向引用。</p>
<p>我们第一种去耦合的方式，就是让父节点监听Button的点击事件，从而当Button在点击的时候，会自动关闭自己，显示怪物</p>
<p><img src="C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20240322214435454.png" alt="image-20240322214435454"></p>
<p>可以看到，这样做，Button并不会持有父节点的引用，而且逻辑也在父节点中编写</p>
<p>这样子，委托就保证了只产生单向引用（弱耦合）</p>
<p>但委托要注意产生意大利面条代码（嵌套调用）</p>
<p><img src="C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20240322214702946.png" alt="image-20240322214702946"></p>
<h4 id="不同模块间的调用"><a href="#不同模块间的调用" class="headerlink" title="不同模块间的调用"></a>不同模块间的调用</h4><p><img src="C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20240322214754710.png" alt="image-20240322214754710"></p>
<p>可以看到Enemies是属于Game的，此时却能够被UI下的GameStartPanel所使用，这样就是跨模块对象交互</p>
<h4 id="为什么跨模块对象交互会有问题？"><a href="#为什么跨模块对象交互会有问题？" class="headerlink" title="为什么跨模块对象交互会有问题？"></a>为什么跨模块对象交互会有问题？</h4><p>因为在实际开发中，模块可能是由不同的人负责的，而这种分工之下，如果跨模块间有引用，就可能造成信息差，从而使得维护上十分麻烦，需要双方不断进行通信，确认引用关系。</p>
<p>因而我们希望跨模块对象交互能够是无引用的方式去完成的。</p>
<p>是否能用委托去做？</p>
<p>不能，因为委托是要持有对象的</p>
<p>因而就要用到消息和事件</p>
<h4 id="消息和事件"><a href="#消息和事件" class="headerlink" title="消息和事件"></a>消息和事件</h4><p><img src="C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20240322215342700.png" alt="image-20240322215342700"></p>
<p>这样就使得原本不同模块间的对象交互变成模块与模块的交互，这样就可以把逻辑写在大的模块里，而不是写到具体的对象之中</p>
<p>最后，通过委托，消息，事件</p>
<p><img src="C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20240322215532608.png" alt="image-20240322215532608"></p>
<p>我们使得父子关系，模块之间的关系变得清晰，从而达到了低耦合，高内聚的目的</p>
<h2 id="表现和逻辑分离"><a href="#表现和逻辑分离" class="headerlink" title="表现和逻辑分离"></a>表现和逻辑分离</h2><p><img src="C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20240322221350511.png" alt="image-20240322221350511"></p>
<p>继承解决扩展的问题</p>
<p>泛型解决类型不一致的问题</p>
<h4 id="为何需要单独做一个数据类？"><a href="#为何需要单独做一个数据类？" class="headerlink" title="为何需要单独做一个数据类？"></a>为何需要单独做一个数据类？</h4><p><img src="C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20240322221532209.png" alt="image-20240322221532209"></p>
<p>因为数据可能在空间和时间上被多个场景，界面，游戏物体所共享，那么此时由于许多东西都要引用它，因而它的独立性必须是很高的，因而要抽离出来，单独放在一个地方进行维护</p>
<p>在代码中，游戏是否通过的代码写在了敌人类里面，但是其实是否通过，并不是由敌人决定，而应该由游戏规则决定的</p>
<p>这就是不符合现实逻辑的代码，增加了阅读的难度</p>
<p><img src="C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20240322221733717.png" alt="image-20240322221733717"></p>
<p><img src="C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20240322222033350.png" alt="image-20240322222033350"></p>
<p>从这点上来说，也就是运行时的数据，不需要放到model里</p>
<h2 id="MVC"><a href="#MVC" class="headerlink" title="MVC"></a>MVC</h2><p><img src="C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20240322222139061.png" alt="image-20240322222139061"></p>
<p><img src="C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20240322222150155.png" alt="image-20240322222150155"></p>
<p><img src="C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20240322222247216.png" alt="image-20240322222247216"></p>
<p>为何不用MVC 而用Command</p>
<p><img src="C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20240322222603771.png" alt="image-20240322222603771"></p>
<h4 id="数据驱动"><a href="#数据驱动" class="headerlink" title="数据驱动"></a>数据驱动</h4><p><img src="C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20240322222710989.png" alt="image-20240322222710989"></p>
<p>也就是通过把表现的逻辑通过事件来注册，表现的逻辑监听的是UI上的数据，如果数据发生改变，则发送事件，使得显示改变，这就叫做数据驱动</p>
<p><img src="C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20240322222828361.png" alt="image-20240322222828361"></p>
<p><img src="C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20240322223017818.png" alt="image-20240322223017818"></p>
<p>BIndableProperty通过将数据和事件变更结合在一起，使得其在数据变更的时候同时会发送事件，大大减少了MV之间的耦合</p>
<h2 id="Command"><a href="#Command" class="headerlink" title="Command"></a>Command</h2><p>为什么要引入Command?</p>
<p><img src="C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20240322223515559.png" alt="image-20240322223515559"></p>
<p>交互逻辑是可能越来越多</p>
<p><img src="C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20240322223707160.png" alt="image-20240322223707160"></p>
<p>通过增加两个继承ICommand的命令类，实现逻辑</p>
<p>如下图</p>
<p><img src="C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20240322223803892.png" alt="image-20240322223803892"></p>
<p>本质上Command就是做到了调用和实现分离。</p>
<p>也就是调用的地方和执行的地方放在了两个文件里</p>
<h4 id="命令的使用"><a href="#命令的使用" class="headerlink" title="命令的使用"></a>命令的使用</h4><p><img src="C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20240322224746975.png" alt="image-20240322224746975"></p>
<h4 id="模块与单例"><a href="#模块与单例" class="headerlink" title="模块与单例"></a>模块与单例</h4><p><img src="C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20240322224933946.png" alt="image-20240322224933946"></p>
<p>为什么不能用static去做，而用单例。</p>
<h4 id="IOC容器"><a href="#IOC容器" class="headerlink" title="IOC容器"></a>IOC容器</h4><p><img src="C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20240322225218707.png" alt="image-20240322225218707"></p>
<p><img src="C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20240322225320387.png" alt="image-20240322225320387"></p>
<p>IOC容器的定义</p>
<p>蓝牙管理器</p>
<p><img src="C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20240322225417250.png" alt="image-20240322225417250"></p>
<p><img src="C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20240322225617644.png" alt="image-20240322225617644"></p>
<h4 id="依赖倒置"><a href="#依赖倒置" class="headerlink" title="依赖倒置"></a>依赖倒置</h4><p>就是说，程序的实现依赖接口，不依赖具体实现</p>
<p>从而使得可以通过IOC快速切换具体的实现类</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2024/03/22/QFramework%E6%9E%B6%E6%9E%84%E5%AD%A6%E4%B9%A0/" data-id="clu3qbmn20004dguc1lox4v60" data-title="QFramework架构学习" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
    
<nav id="article-nav">
  
  
    <a href="/2024/03/16/AB%E8%B5%84%E6%BA%90%E6%A1%86%E6%9E%B6%E5%AD%A6%E4%B9%A0/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">AB资源框架学习</div>
    </a>
  
</nav>

  
</article>


</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/03/">March 2024</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/02/">February 2024</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2024/03/22/QFramework%E6%9E%B6%E6%9E%84%E5%AD%A6%E4%B9%A0/">QFramework架构学习</a>
          </li>
        
          <li>
            <a href="/2024/03/16/AB%E8%B5%84%E6%BA%90%E6%A1%86%E6%9E%B6%E5%AD%A6%E4%B9%A0/">AB资源框架学习</a>
          </li>
        
          <li>
            <a href="/2024/03/16/unity%E7%BC%96%E8%BE%91%E5%99%A8%E5%AD%A6%E4%B9%A0/">unity编辑器学习</a>
          </li>
        
          <li>
            <a href="/2024/03/16/Odin%E4%BD%BF%E7%94%A8/">Odin使用</a>
          </li>
        
          <li>
            <a href="/2024/03/14/UI%E6%A1%86%E6%9E%B6%E5%AD%A6%E4%B9%A0%E4%B8%AA%E4%BA%BA%E7%AC%94%E8%AE%B0/">UI框架学习个人笔记</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2024 John Doe<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.6.4.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>